// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "linux-musl"]
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id               Int                @id @default(autoincrement())
  name             String
  email            String             @unique
  password_hash    String
  nationality      String
  created_at       DateTime           @default(now())
  Recipes          Recipes[]
  Favorite_Recipes Favorite_Recipes[]
}

model Recipe_types {
  id      Int       @id @default(autoincrement())
  name    String
  Recipes Recipes[]
}

model Ingredients {
  id                  Int                   @id @default(autoincrement())
  name                String
  Ingredients_Recipes Ingredients_Recipes[]
}

model Recipes {
  id                  Int                   @id @default(autoincrement())
  name                String
  description         String
  recipe_type_id      Int
  author_id           Int
  created_at          DateTime              @default(now())
  updated_at          DateTime              @updatedAt
  author              User                  @relation(fields: [author_id], references: [id], onDelete: Cascade, onUpdate: Cascade)
  recipe_type         Recipe_types          @relation(fields: [recipe_type_id], references: [id])
  Ingredients_Recipes Ingredients_Recipes[]
  Favorite_Recipes    Favorite_Recipes[]
}

model Ingredients_Recipes {
  id            Int         @id @default(autoincrement())
  recipe_id     Int
  ingredient_id Int
  recipe        Recipes     @relation(fields: [recipe_id], references: [id])
  ingredient    Ingredients @relation(fields: [ingredient_id], references: [id])
  ing_amount    String
}

model Favorite_Recipes {
  id         Int      @id @default(autoincrement())
  user_id    Int
  recipe_id  Int
  user       User     @relation(fields: [user_id], references: [id])
  recipe     Recipes  @relation(fields: [recipe_id], references: [id])
  created_at DateTime @default(now())
}
